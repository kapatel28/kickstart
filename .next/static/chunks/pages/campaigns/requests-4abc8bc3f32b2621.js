(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{19553:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return r(32601)}])},32601:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return te}});var n=r(28520),o=r.n(n),s=r(85893),a=r(67294),i=r(87462),c=r(13871),l=r(86010),u=(r(45697),r(98459)),p=r(28935),d=r(12519),f=r(92248);function h(e){var t=e.children,r=e.className,n=(0,l.Z)(r),o=(0,p.Z)(h,e),s=(0,d.Z)(h,e);return a.createElement(s,(0,i.Z)({},o,{className:n}),t)}h.handledProps=["as","children","className"],h.defaultProps={as:"tbody"},h.propTypes={};var v=h,m=r(69591),b=r(45150);function y(e){var t=e.active,r=e.children,n=e.className,o=e.collapsing,s=e.content,c=e.disabled,h=e.error,v=e.icon,m=e.negative,g=e.positive,w=e.selectable,x=e.singleLine,j=e.textAlign,Z=e.verticalAlign,P=e.warning,R=e.width,k=(0,l.Z)((0,u.lG)(t,"active"),(0,u.lG)(o,"collapsing"),(0,u.lG)(c,"disabled"),(0,u.lG)(h,"error"),(0,u.lG)(m,"negative"),(0,u.lG)(g,"positive"),(0,u.lG)(w,"selectable"),(0,u.lG)(x,"single line"),(0,u.lG)(P,"warning"),(0,u.X4)(j),(0,u.Ok)(Z),(0,u.H0)(R,"wide"),n),G=(0,p.Z)(y,e),O=(0,d.Z)(y,e);return f.kK(r)?a.createElement(O,(0,i.Z)({},G,{className:k}),b.Z.create(v),s):a.createElement(O,(0,i.Z)({},G,{className:k}),r)}y.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],y.defaultProps={as:"td"},y.propTypes={},y.create=(0,m.u5)(y,(function(e){return{content:e}}));var g=y;function w(e){var t=e.children,r=e.className,n=e.content,o=e.fullWidth,s=(0,l.Z)((0,u.lG)(o,"full-width"),r),c=(0,p.Z)(w,e),h=(0,d.Z)(w,e);return a.createElement(h,(0,i.Z)({},c,{className:s}),f.kK(t)?n:t)}w.handledProps=["as","children","className","content","fullWidth"],w.defaultProps={as:"thead"},w.propTypes={};var x=w;function j(e){var t=e.as,r=(0,p.Z)(j,e);return a.createElement(x,(0,i.Z)({},r,{as:t}))}j.handledProps=["as"],j.propTypes={},j.defaultProps={as:"tfoot"};var Z=j;function P(e){var t=e.as,r=e.className,n=e.sorted,o=(0,l.Z)((0,u.cD)(n,"sorted"),r),s=(0,p.Z)(P,e);return a.createElement(g,(0,i.Z)({},s,{as:t,className:o}))}P.handledProps=["as","className","sorted"],P.propTypes={},P.defaultProps={as:"th"};var R=P;function k(e){var t=e.active,r=e.cellAs,n=e.cells,o=e.children,s=e.className,h=e.disabled,v=e.error,m=e.negative,b=e.positive,y=e.textAlign,w=e.verticalAlign,x=e.warning,j=(0,l.Z)((0,u.lG)(t,"active"),(0,u.lG)(h,"disabled"),(0,u.lG)(v,"error"),(0,u.lG)(m,"negative"),(0,u.lG)(b,"positive"),(0,u.lG)(x,"warning"),(0,u.X4)(y),(0,u.Ok)(w),s),Z=(0,p.Z)(k,e),P=(0,d.Z)(k,e);return f.kK(o)?a.createElement(P,(0,i.Z)({},Z,{className:j}),(0,c.Z)(n,(function(e){return g.create(e,{defaultProps:{as:r}})}))):a.createElement(P,(0,i.Z)({},Z,{className:j}),o)}k.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],k.defaultProps={as:"tr",cellAs:"td"},k.propTypes={},k.create=(0,m.u5)(k,(function(e){return{cells:e}}));var G=k;function O(e){var t=e.attached,r=e.basic,n=e.celled,o=e.children,s=e.className,h=e.collapsing,m=e.color,b=e.columns,y=e.compact,g=e.definition,w=e.fixed,j=e.footerRow,P=e.headerRow,R=e.headerRows,k=e.inverted,_=e.padded,A=e.renderBodyRow,N=e.selectable,E=e.singleLine,C=e.size,q=e.sortable,T=e.stackable,B=e.striped,z=e.structured,F=e.tableData,H=e.textAlign,S=e.unstackable,D=e.verticalAlign,L=(0,l.Z)("ui",m,C,(0,u.lG)(n,"celled"),(0,u.lG)(h,"collapsing"),(0,u.lG)(g,"definition"),(0,u.lG)(w,"fixed"),(0,u.lG)(k,"inverted"),(0,u.lG)(N,"selectable"),(0,u.lG)(E,"single line"),(0,u.lG)(q,"sortable"),(0,u.lG)(T,"stackable"),(0,u.lG)(B,"striped"),(0,u.lG)(z,"structured"),(0,u.lG)(S,"unstackable"),(0,u.sU)(t,"attached"),(0,u.sU)(r,"basic"),(0,u.sU)(y,"compact"),(0,u.sU)(_,"padded"),(0,u.X4)(H),(0,u.Ok)(D),(0,u.H0)(b,"column"),"table",s),X=(0,p.Z)(O,e),K=(0,d.Z)(O,e);if(!f.kK(o))return a.createElement(K,(0,i.Z)({},X,{className:L}),o);var U={defaultProps:{cellAs:"th"}},I=(P||R)&&a.createElement(x,null,G.create(P,U),(0,c.Z)(R,(function(e){return G.create(e,U)})));return a.createElement(K,(0,i.Z)({},X,{className:L}),I,a.createElement(v,null,A&&(0,c.Z)(F,(function(e,t){return G.create(A(e,t))}))),j&&a.createElement(Z,null,G.create(j)))}O.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],O.defaultProps={as:"table"},O.propTypes={},O.Body=v,O.Cell=g,O.Footer=Z,O.Header=x,O.HeaderCell=R,O.Row=G;var _=O,A=r(80967),N=r(96215),E=r(83544),C=r(14148),q=r(1508);function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t,r,n,o,s,a){try{var i=e[s](a),c=i.value}catch(l){return void r(l)}i.done?t(c):Promise.resolve(c).then(n,o)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function a(e){B(s,n,o,a,i,"next",e)}function i(e){B(s,n,o,a,i,"throw",e)}a(void 0)}))}}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?T(e):t}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return L(this,r)}}var I=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(i,e);var t,r,n,a=U(i);function i(){var e;return F(this,i),S(T(e=a.apply(this,arguments)),"onApprove",z(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,C.Z)(this.props.address),e.next=3,q.Z.eth.getAccounts();case 3:return r=e.sent,e.next=6,t.methods.approveRequest(this.props.id).send({from:r[0]});case 6:N.Router.pushRoute("/campaigns/".concat(this.props.address,"/requests"));case 7:case"end":return e.stop()}}),e,this)})).bind(e)).bind(T(e))),S(T(e),"onFinalize",z(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,C.Z)(this.props.address),e.next=3,q.Z.eth.getAccounts();case 3:return r=e.sent,e.next=6,t.methods.finalizeRequest(this.props.id).send({from:r[0]});case 6:case"end":return e.stop()}}),e,this)})).bind(e)).bind(T(e))),e}return t=i,(r=[{key:"render",value:function(){var e=_.Row,t=_.Cell,r=this.props,n=r.id,o=r.request,a=r.approversCount,i=o.approvalCount>a/2;return(0,s.jsxs)(e,{disabled:o.complete,positive:i&&!o.complete,children:[(0,s.jsxs)(t,{children:[" ",n]}),(0,s.jsxs)(t,{children:[" ",o.description]}),(0,s.jsxs)(t,{children:[" ",q.Z.utils.fromWei(o.value,"ether")]}),(0,s.jsxs)(t,{children:[" ",o.recipient]}),(0,s.jsxs)(t,{children:[" ",o.approvalCount,"/",a]}),(0,s.jsx)(t,{children:o.complete?null:(0,s.jsx)(A.Z,{color:"green",basic:!0,onClick:this.onApprove,children:" Approve "})}),(0,s.jsx)(t,{children:o.complete?null:(0,s.jsx)(A.Z,{color:"teal",basic:!0,onClick:this.onFinalize,children:" Finalize "})})]})}}])&&H(t.prototype,r),n&&H(t,n),i}(a.Component);function W(e,t,r,n,o,s,a){try{var i=e[s](a),c=i.value}catch(l){return void r(l)}i.done?t(c):Promise.resolve(c).then(n,o)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return!t||"object"!==$(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Q(e);if(t){var o=Q(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return V(this,r)}}var te=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(i,e);var t,r,n,a=ee(i);function i(){return J(this,i),a.apply(this,arguments)}return t=i,n=[{key:"getInitialProps",value:function(e){return(t=o().mark((function t(){var r,n,s,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.query.address,n=(0,C.Z)(r),t.next=4,n.methods.getRequestCount().call();case 4:return s=t.sent,t.next=7,n.methods.approversCount().call();case 7:return a=t.sent,t.next=10,Promise.all(Array(parseInt(s)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return i=t.sent,t.abrupt("return",{address:r,requests:i,requestCount:s,approversCount:a});case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var s=t.apply(e,r);function a(e){W(s,n,o,a,i,"next",e)}function i(e){W(s,n,o,a,i,"throw",e)}a(void 0)}))})();var t}}],(r=[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,r){return(0,s.jsx)(I,{id:r,request:t,address:e.props.address,approversCount:e.props.approversCount},r)}))}},{key:"render",value:function(){var e=_.Header,t=_.Row,r=_.HeaderCell,n=_.Body;return(0,s.jsxs)(E.Z,{children:[(0,s.jsx)("h3",{children:" Requests "}),(0,s.jsx)(N.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,s.jsx)("a",{children:(0,s.jsx)(A.Z,{primary:!0,floated:"right",style:{marginBottom:10},children:" Add Request"})})}),(0,s.jsxs)(_,{children:[(0,s.jsx)(e,{children:(0,s.jsxs)(t,{children:[(0,s.jsx)(r,{children:" ID "}),(0,s.jsx)(r,{children:" Description"}),(0,s.jsx)(r,{children:" Amount "}),(0,s.jsx)(r,{children:" Recipient"}),(0,s.jsx)(r,{children:" Approval Count"}),(0,s.jsx)(r,{children:" Approve"}),(0,s.jsx)(r,{children:" Finalize"})]})}),(0,s.jsx)(n,{children:this.renderRows()})]}),(0,s.jsxs)("div",{children:[" Found ",this.props.requestCount," requests. "]})]})}}])&&M(t.prototype,r),n&&M(t,n),i}(a.Component)}},function(e){e.O(0,[774,482,406,582,888,179],(function(){return t=19553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);